## 失败的尝试（已放弃，以后也没必要再调整）

### 2.12 v07
Income循环脚本，结算时刻设计大量金钱计算、计分读取、资金分配。scoreMoney矩阵在遍历时考虑附加一把锁，同时更改脚本的运算方式。
+ 考虑到这里的设置是遍历所有组的，它有可能与服务器卡死有关。
  用于计分的mutexReadScore锁在income脚本读取数值并写入0的时候也有使用的意义。
	+ 但仍然65min挂服。**放弃 mutexReadScore 的使用。**

### 2.12 v06
busy、temporary使用skill而非数组。
AI_Leader脚本刷新时长缩短到60秒。
使用旧的res坦克模型。
knowsAbout上锁。

	应用res循环脚本后，18队AI是挂的，但是9v9步兵、纯坦克可以平稳运行并保持59的FPS。仍然会掉落，但有跃迁回55+的能力。

### 2.12 v05
尝试将RES巡逻单位打散到6倍的组里，每个组容纳1坦克。
+ **FPS没有明显变化，卡死现象仍然存在。**
+ **值得一提的是，巡逻组初始自带1坦克，但开始的前10min，FPS仍然是58、59.**
+ 有理由相信组的数量并不很影响FPS。***城镇里空载具数量是否影响性能？***

尝试将AI队伍命令由逐个单位挂载脚本，改为整支队伍挂载一个脚本。
+ **失败**。即使同期削减res巡逻队伍数量为4，仍然在25min时卡死。更糟的是FPS一度走低到18，这是此前没有过的现象。

### 2.12 v04
优化RES巡逻的细节设置
+ 使用SQS替代SQF做循环，并增设0.1的延时。
  使用某个数组记录Server上可拆除建筑，供destroy阶段调用。
  删除进入反抢、拆家的阶段。
  令整支队伍使用同一个巡逻坐标来选取最近的城镇、敌建筑。
  巡逻坐标直接用当前坐标附近100米的任意一个随机坐标。

## 或许有效的尝试（有直观上的效果）

### 2.12 v06
队长脚本2min循环（原本5min）
KnowsAbout脚本2min循环（原本不循环，直接传入下一次执行）

	18v18的步兵模式仍然会卡死。
	相比9v9，18v18的FPS很难保持40+，res多的时候能跌落到30-，但是纯res测试仍然能维持58+。
	看来是综合作用。目前来说暂时到此为止吧。顺带30-并不会维持很久，之后也能攀升到35+。65min南边触发morton集群后31，尚可。最低会到24。
	+ 此时南边阵营出固定翼一架，并且挂服。
	  v07尝试时也出现过类似时间的挂服。65-67。
	
## 正解及相关探索

### 2.12 v06
为RES的脚本添加互斥锁，脚本主体不会并行。

### 2.12 v05
将部分循环脚本调整为一定时间后将状态传出给新的脚本，并终止当前脚本。
+ 尝试取消巡逻组、取消TG在触发时往巡逻组添加单位。FPS长期稳定59。
+ 保留巡逻组，不开启AI，FPS仍然走低，于30min左右开始。
+ 保留巡逻组，不开启AI，RES的TG不启动循环，FPS仍然走低。
  由此猜测和巡逻组脚本的循环次数有关。考虑将状态传出给新脚本，停止当前脚本，成功在无AI队伍时达成长期高FPS。
	+ **但是这与只有2组巡逻组时FPS不下降有矛盾。**

### 2.12 v04
发现civ的镜头拖曳随时间增加而卡顿。
从FPS的数值来看，与ww4动作无关。与增广炸药无关。
+ 事实上AI大量使用的TakeHoldTowns命令里没有携带炸药与否的判定，可见增广炸药与卡死现象应该是没有关系的。
关闭res巡逻组，发现FPS下降速率减慢了一些。但最终还是稳定在35的水准。
发现命令变更时FPS有突变。
	
