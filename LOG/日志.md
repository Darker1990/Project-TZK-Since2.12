worker维修时提示的hint没改
干脆削减playable的group总数。要调整groupMatrix的记录总数。
有可能是每分钟收入分配给各AI组导致的负担吗？事实上和groups总数有关的设置很多，太难猜了。
knowsAbout不工作？
***调整摄像头dialog。***
***AI单位远距离移动，是否已经被解除循环后的模式规避了？如果没有的话，考虑使用向量内积，判定在锐角上最近的town，作为目的地。总是按town移动，对AICO有效，强化城镇的防御。***
***AI步兵放置炸药的判定，寻距离最近的敌建筑，也不必用sqf，由于预设了knowsAbout机制，那么只需要在已暴露的敌建筑里做距离判定即可。暴露建筑可以由server进行判定。***
***对AI坦克开炮也是同理。RES亦然，进入反抢和基地搜寻阶段，负担较重，有可能是对“最近敌建筑”搜寻有较大负担。***

## 2.12 v07
修复金钱系统的异常
+ 问题在于Worker、SupportVehicle脚本中，本该用repair的地方没有修改，仍然保留从sqf复制过来时的value变量名。
+ 顺带修改Prim建筑被摧毁的EH里，缺乏_repairInfoList等变量的定义。

设置loop的脚本不传出数组。如果需要传出坐标，以camCreate的sensor作为位置的标记。
+ PlayerClient.sqs
  更改units...数组的定义方式，使用sensor传递坐标。
+ Spectator.sqs
  使用sensor传递坐标。
+ AI_Leader
  <c>不将数组作为传出的参数。并且设置下一次循环时，将idOrder减一，以起到更新命令的效果。
	+ 仍然65min时挂服。
	+ **放弃id减一。**
+ Income
  避免将数组作为循环脚本的参数。
+ KnowsAboutR
  使用2个数值记录时间。
+ ResPatrolGroup.sqs
  使用sensor传递坐标。
+ Server.sqs
  不传出数组而是逻辑值。
+ TownGroup
  避免采用数组。

将城镇触发器也改成循环模式。
+ 发现这样做有问题。是因为list命令的锅吗？出现了一些城镇旗帜变色非常慢的现象。
  **放弃本次更改**

下调doom强度的res出生频率，保持和C8设置相同的3分钟，而非2分钟，避免过大的负担。
+ 65min仍然挂服。

在AICO的购买脚本里，强制设置它只会为前9队购买。
+ 65min仍然挂服。

取消knowsAbout、Hibernate的分布式计算。
调整文件的结构，
+ Town Group系列脚本从Server目录下移除，统一启动Start子目录下的脚本。

从mission.sqm里删除没有被使用的初始化信息。删除TimeWeather脚本的启动，改为由**Init.sqs**执行。
+ ***最好设置由Server广播，每隔5分钟左右统一天气和时间的信息，5min内由玩家端自行演算，接收到server信息后平滑过渡到server状态。***

设置直升机火箭弹科技直接生效。

5种反坦克步兵的Equip脚本里，主武器弹夹数增加回4个。

玩家名字显示，颜色改为红色。
+ groupIsAI的脚本里，要增设AI队长的图标颜色恢复为蓝色。

## 2.12 v06
bug修复。
+ v05版本的于busy、temporary字符串的主体使用了_this，从而_unit作为参数调用，这样一来在not命令之后的字段需要括号。
	+ 影响几乎全部temporary命令脚本。
+ v05的资金bug。每分钟的收入无法收到，给钱时能得到"you received..."的提示，但是无法得到资金信息。
  bug在v07里修复。
	+ MoneyMatrix的信息使用了2个pv变量。猜测问题可能在于接收到第一个变量后就执行脚本，此时还没有接收到第二个变量。
		+ 因此在脚本内设置使用@等待第二个变量的值也变化才继续执行脚本。因为同时有10个脚本在工作因此应该是ok的。
		+ <s>保险起见，对0-0-2界面，设置调出时发讯server，启动money信息的自检。
			+ ***使用si和gi作为变量名称。***
			+ 这个设置在v07里删除。</s>
	
Reclaim命令的radius参数应该设置为距离co的半径，超出半径的步兵不会响应。至于可回收的单位，则按500米为半径搜索载具。
+ 事实上，如果设置一个响应半径、一个回收半径会更好，但是参数已经不够用了。

调整Server的Money脚本。
+ 调整3个SQS脚本的文本内容。但是应该只有美观的意义。

更改UpdateWeather脚本，与timeboost合并。
+ **粗略的探究，skipTime以及set天气的命令似乎都是局部的。以往的updateWeather本以为是server-global的，但其实脚本因为没有server检测，从而其实是所有client都启动的。**
	+ ***需要一个校准的系统才好。***
	
调整knowsAbout文件的名称、位置。
+ 设置leader和structure的knowsAbout脚本由Server启动，和旧机制相同，对所有group有效。
+ 调整所使用的SQF。
+ 取消UpdateLeader.sqs，这个脚本用于AI队长初始化及复活后追加KA，可以和UpdateLeader合并。

Server测试玩家是否下线的脚本也做成loop
+ 玩家数与FPS的负相关仍然存在。不知道理由究竟是什么。

## 2.12 v05
探究发现，循环脚本反复执行会拖慢服务器。将循环脚本修改为每次执行完毕后将状态传出，启动新的脚本并结束当前脚本，可以有效地规避FPS突然下降的情形。
仅针对RES巡逻组探究（关闭所有playable的AI队伍），发现RES数量并不会导致FPS下降，非循环的脚本使得FPS稳定在59（仍然存在突变至35的情形，但它仍然还会返回59，在两个FPS之间的变化更像是跃迁）。
+ Res巡逻组
	+ DynamicInitializationGroup启动Start目录的巡逻组脚本。
	  Start目录放置初始化脚本，启动Loop目录的循环脚本。
	  循环脚本设置：
		+ 恢复原本的巡逻组模式。
		  采用loadFile命令获得初始坐标和巡逻坐标。巡逻坐标的SQF仍然设置112次上限以及沿用旧坐标的设定。
		  进入Destroy阶段后，如果因为距离过远而进入反抢判定，不再设置如果没有敌城镇则回到巡逻模式。
		  TakeTown及Destroy阶段都不使用forEach执行，而是用goto的方式设置循环，并使用2秒的延时稀释。
			+ 从测试来看，之前的FPS下降有可能是taketown阶段没有使用延时导致的。
				+ 某次测试，早期（怀疑20min，但无法证实）FPS下降到35，40min时回升到59，55min时跌落35并持续到95min，然后回升到59，一直持续（本次实验destroy阶段因为bug而不会移动）。
				  假说：patrol与destroy阶段无lag，taketown阶段有，从而少量组的patrol时间比较短，destroy阶段比较长（40min），因而造成了第一次FPS跌落。
				  第二次跌落则源于部分组具有较长的patrol时间（55）和destroy时间（95）。
		+ 创造Common\DelayMove脚本，用于延迟移动。
		  这个脚本用于Destroy阶段让RES单位在发炮后才开始移动。
		  
对于其他循环脚本，也有必要做此类调整，但很遗憾的是仅就Server FPS而言***并不能完全解决问题***。DOOM强度的RES以及双方4支AI队伍的测试，大概可以维持70min的高FPS，之后落到35-40，当AI队伍数量继续增加后，FPS在开局20分钟左右就会跌落到35-40的区间，相比之前似乎有所提升，但显然问题没有被彻底解决。
另外需要指出的是，为节省局部变量的资源，有必要将延时扔到脚本的最开头。
+ AI单位命令脚本
  与其设置命令脚本的更迭，倒不如设置AI队长在新启动循环时直接增加id，进而更迭AI的命令脚本。
  ***放弃具体的脚本命令循环模式。已使用队长脚本循环机制。***
	+ 首先要指出的是，所有命令脚本最开头的**busy循环**都要增加idOrder的出口，并且将2s的延时增加到5s。
	+ 脚本的路径定义于orderDefs矩阵。已经调整了这个矩阵只存储脚本的名字，不存储上一级的路径，因此可以利用它来启动loop目录下的同名文件。
	  在命令脚本的初始化阶段，读取_order指针时，就一并将script名称读取。
		+ ***Temporary脚本也需要这么处理。***
	+ 只修改常用的2个Guard、2个Patrol、HoldTown，以及AI常用的TakeHoldTown。
		+ ***TakeHoldTown似乎无法脱出Hold片段。已检查两种模式所有出口的逻辑值赋值，待观测。***
		+ 单位执行holdTown命令的效率太低。会不会和载具、300m判定等有关？
+ AI队长命令脚本
	+ 每3分钟传出状态。
	+ ***事实上AI购买检测可以重新扔出去。***
+ AICO命令脚本
	+ 每3分钟传出状态。
	  AICO有非常多的状态参数，数组规模31，有可能还有遗漏，需要观察。
+ KnowsAbout脚本
	+ 根据res阵营与否启动不同的循环脚本。
	+ player目录下的脚本也做成循环。
+ Town Group脚本
	+ 玩家双方的TG脚本，只修改1和3号。
	+ Res的TG脚本，只修改1号。
+ 工厂制造脚本
	+ 正常。AICO会购买步兵和维修卡车。
+ 工人、support脚本
+ Server功能脚本
	+ UpdateServer, UpdateIncome
Player目录下的循环脚本也有必要做出调整。事实上，时有玩家的游戏程序崩溃退出的情形发生，有理由相信一些脚本的持续循环与此有关。此外，civ的镜头在游戏开始一定时间之后就会有明显的滞涩感，这很可能也是出于相同的缘由。
+ Player功能脚本
	+ UpdatePlayer(Spectator)，UpdatePlayerVehicle。
	+ 玩家的3个Marker脚本，CIV的Marker脚本（做成自循环的模式）。
		+ 设置Marker以及Spectator的模式后，镜头移动以及地图拖动平滑得超出想象。
		+ 刷新频率要增加，大概30s左右安排一次重置。

玩家数较多时Server FPS下降是事实。在调整循环脚本的现在，还需要进一步观察，但估且先引入KnowsAbout分布式计算，各client只处理自己的local队伍。
+ Server上启动的脚本，groups只读取AI队伍，不读取玩家队伍。Reveal命令对玩家队伍也将无效。
+ Player只处理自己队伍的发现，设置5个收讯脚本。
+ ***队长和建筑缺乏client的启动途径。***
+ **新模式的联机FPS似乎没有因此而提升。**
	+ ***考虑改回去。***

busy、temporary的字符串，将_unit更改为_this。注释skill的实现方式，仍然改为原有的数组模式，但使用set的方式进行写入。如果有问题再恢复为暴力减法。
+ 维修正常。

显示玩家名称时，队伍名通过括号添加在末尾，图标颜色变为橙色。
在**InitGUIControlIDs**补全CIV界面关于NVG和QUIT按钮的IDC。
重新投入T80_TZK模型的使用。
AI的Order、Setting的初始化定义，从Init.sqs移动到Common目录下的脚本里。
+ ***grpSetting也可以调整为带参数的字符串。***

## 2.12 v04
TZK Setting面板
+ 某个选项变动之后，除bool矩阵要写入新的数值之外，脚本内的"_last"数组也要更新数据。否则只能响应单向的变化。
+ Player\Info\GroupIsAI设置接收到AI信息后，直接将队长图标改名为队伍名称。

为使LF生产的固定翼不被建筑卡住，LF的sdDist数值设为35，和机场一致。

字符串
+ grpSetting经常出现错误提示。因为被大量使用，不知道来源，因此在SQF内移除call grpSetting，使用常规的写法。
+ 测试一下将轻量级的SQF文件改成字符串。
	+ 一些SQF的风格很像字符串，考虑到OFP并非一开始就引入SQF语法，一些function很有可能在早期开发CTI时以字符串形式调用，之后改成了SQF，然后SQF就一直被沿用。
		+ Vector函数的dot内积缺乏对3维向量的支持，一并补上。
		+ UpdateAttaching改写为字符串可能有危险。
		+ AddToUnitMatrix.sqf本质只是索引搜索，可以取消
		+ AddToStructMatrix.sqf只是单纯的写入，也可以取消。事实上还做了进一步的调整，见下。
			+ 顺带一提，一些函数调用矩阵structMatrix时并没有清理objNull，而是直接用等号赋值。
			+ HandleStructMatrixRemove执行了清理objNull的操作。在新的设计下它是不需要的。
		+ Server的MoveAI
		+ Server的Money，只是简单的运算，并没有特地调用sqf的意义，既然已经应用了SQS作为控制开关，那么继续沿用就是了（为了利用互斥保护数组）。
			+ InitUnitFactory在算钱时使用了互斥的前半部分，因此要改写为一个完整的互斥环节。
		+ Server的GetIdleFactory弃用，改为GetIdleFactories，后者改为字符串。
+ 原有的一些字符串常数，此前没有意识到可以传参，本次它们也一并编辑，并收录于InitFunction脚本里。

建筑系统
为了优化自动购买系统，首先需要对建筑系统进行调整。
+ 大原则：出于兼容性考虑，虽然建筑单位多数 setDamage 0 不会像载具发生二次爆炸，但仍然坚持使用新单位替换原有单位。
+ StructMatrix
	+ 受限于“替换”这一机制，需要设计合理的方法。原有建筑是必须要删除的，即使设置一定的延时，考虑到“延迟”的存在，这个机制仍然不稳定，不可以在远端使用find。
	+ 鉴于建造统一在server上完成，那么广播时设置server将矩阵中的索引一并传出。
	+ StructMatrix需要保证顺序。如果不在某个时刻对矩阵清理索引较小的objNull元素，数组规模将会无上限。
	+ 数量有限制的建筑目前不需要担心，那么需要对工事类建筑进行处理。利用之前定义的structsShelter来区别对待。
	+ AddToStructMatrix
		+ Server上只在BuildStruct、StructuresServerRemove里执行添加。改动后的机制需要一并获取索引并由发讯脚本传出。
		+ 由于BuildStruct是SQF，故需要在Server上设置一个脚本，添加到矩阵后直接传出索引用于发讯。
		+ ReplacePrimStruct里，删除原有建筑的机制，应当将删除单位的时间拖后，利用DeleteVehicleAfterDelay来处理。
			+ 将StructuresServerRemove的启动扔到最后，使用原有object获取索引，写入新的建筑（此处上锁），将索引和新建筑一并传入发讯脚本。
			+ StructuresServerRemove去除矩阵写入，将原有建筑扔到海外，并设置10秒延时后删除。
		+ SendStructBuilt在si的更高一位记录index。如果传入的是-1，则读取当前的数组规模。
		+ structsShelter类型单位，使用find objNull从起始位置替换删除单位。
	+ SendStructMatrixRemove.sqs
		+ 建筑制造统一由server完成，事实上只有server需要获取索引，player是被动接收索引。由于直接采用set执行写入，而删除则由delete的全局性完成，事实上不需要remove。
		+ 因此隐藏server的发讯入口，注释**SendStructMatrixRemove.sqs**的启动。因为矩阵里建筑的索引由server统一计算并发讯，client不可以再自行调整。
+ Server上的structuresServer数组
	+ 这个数组用于记录建筑数组，在建筑损毁/拆除时将其他组件一并清理。
	+ 为应用find，改写为structServer和structsServer两个数组。前者用于存放0号组件，后者存放其他组件以及"_type"信息。
	+ 几个相关脚本的设置更改。原先整合到一个脚本的做法是不妥的。
+ Server上的repairableStructureMatrix矩阵
	+ 用于存放待维修的建筑。因为数组格式的缘故，依赖于SQF函数执行维修。如果能够改写为SQS语法并应用互斥锁，将会比较方便。
		+ 多个单位维修完毕后都会启动ReplacedPrimStruct脚本。由于待维修的建筑已经被新的建筑在structServer中替换，但又没有立刻删除（走延时删除模式），会触发报错信息。
	+ 适应于find而拆分为0号组件+其他信息。增设repairableStructureInfo矩阵。
		+ 需要指出的是，为保证顺序，新损毁的建筑总是从末位插入，或替换末尾的objNull。因此在添加元素时，需要特殊处理。
		+ 设置一个从后向前搜索Null元素的函数。放弃原有的sqf。
	+ 将RepairStructure.sqf更改为SQS语法，由worker和support执行。mutexRepairStructure锁从ReplacePrimStruct移动到worker和support脚本里。
		+ 当维修完毕后，由worker和support在脚本的上锁片段将repairableSturcture的相应单位**set**为objNull，而非被动等待它被删除。
	+ 适应于数组元素格式的修改，其它调用脚本的语法做相应调整。
	
AI自动购买
+ 这个脚本的设计原本就不够完善。增加了factory二值化解码后可能进一步加重负担。
+ 从已有玩家的风格来看，倾向于大量使用AI自动购买，对真人玩家数不高的情形，AI相应地变多，负担加重。玩家下线后也进入这种情形，而且和笔者测试训练任务，纯爆坦克无压力的情形也不矛盾。
+ 新的StructMatrix模式，工厂和矩阵中索引总是捆绑的。因此只需从matrix里用+号提取数组，清理null元素后对固定索引判断即可。
+ UpdateLeader里每个队长每5秒启动一次SQS。这个设置在server的FPS较低时很危险。因此将整个脚本改为UpdateLeader的一个片段。
	+ 主循环的延时仍然为5秒。
	+ 跳转自动购买后执行判断。对于选取了购买方案的队伍，设置它总是从structMatrix里顺位与setting相一致的工厂购买。在工厂损毁时，不从递补的下一个工厂购买，维修完毕后恢复购买。
		+ 但是当工厂被拆除，或不修复而消失，则递补下一个工厂。
	+ 按原方案购买的模式，随机数要-0.5，否则可能选取到count附近，对应元素为nil，造成AddToUnitQueue报错。
		+ setect对非整数的处理，0.5以外的遵循四舍五入，但0.5总是选取到相邻的偶数而非奇数。
		+ Random命令取值范围是0~x，包含0但不包含x。减去0.5后，可以确保不选取到count。
+ AICO设置在dev模式及getworld == "eden"时购买步兵，用于调试server的FPS。
	+ 单人纯步兵18对18通过，但2人对战有问题，坦克仍然需要怀疑。
	+ InitUnitTypes里将特殊T80取消。不过也不应该，毕竟18对18的步兵也存在res特殊坦克，而setObjectTexture的效果是local的。【仍然卡死】
	
AI命令机制
+ 将17组满员AI从pickup wait 99min改为don't use后，可以观察到server的FPS从38骤降到25。相关的操作是短时间内大量的busyClear，对全局数组变量执行清理和重新赋值操作。
+ 因此考虑修改机制。
	+ 延时【暂时】不考虑，尝试使用find和set，在指定位置写入objNull起到擦除效果，写入时使用find objNull来写入或末位添加。【仍然卡死】
	+ in判定的两端【拟考虑】使用互斥锁保护，避免数组编辑过程中的in判定。
	+ 【效果不好】，v04仍然存在挂服现象。
+ 另一种可用的机制是利用skill值。CTI里默认单位的skill为1，那么可以用0.9998和0.9999来标识它。【仍然卡死】
	+ 设置了superAI的服务器是无法用skill的返回值的。任务里加一个提示。CTI里单位的skill总是1，没必要开superAI。
		+ 【任务提示】尚未添加。
		+ 需要检测setSkill命令的变量与效果分别是全局的还是局部的。
			+ 对效果全局的情形，需要分析一下它的带宽负担。
			+ 需要考虑join的影响。
			+ 【建服后用remote端观察】
		+ 更改busy等的模式。注释原有设置，应用新设计。
	+ 它们和FPS应该没什么关系。
+ 此外，还有一种可行的做法，即设置throw和put的同类武器。不过它会在rearm执行时被覆盖，用于busy尚可，用于temporary就很不合适了。
+ AI事件触发器涉及的补给单位记录数组CheckSupportUnits，也采用find和set的方式进行编辑。【仍然卡死】
+ 一度在队伍order变更时导致服务器卡死。因此在所有orderMatrix, orderTempMatrix出现的脚本里，利用指针优化脚本的写法。【仍然卡死】
	+ 命令脚本创造指针变量指向orderMatrix select _si select _gi。
	+ Handle脚本不可以直接对gi执行set，要对gi的元素逐个写入。这样的设置和自制的MsgSetWPCO响应路点位置变化是一致的。
	+ AI队长的脚本特别处理。虽说此前一直也没有这么优化过，它应该不至于是问题的来源就是了。
	+ 同理处理aiSetting矩阵。
+ 关闭AI步兵hit的事件触发器。【仍然卡死】

AI炸药设置
+ Order等脚本不再使用sqf获取弹夹数组，使用普通的magazine命令。【仍然卡死】
+ AI_CheckDropBomb.sqs里，利用sqf读取实际的弹夹，若为零，再调用magazines命令，如果发现漏网之鱼，则执行remove命令。【仍然卡死】
+ Order命令对于执行炸药（及补给）的单位，sleep的延时上调到至少20秒。【仍然卡死】
+ 在AI的武装脚本里删除, magPistolSatchel弹夹。【仍然卡死】
+ 增广炸药地雷在Server目录下恢复原有的判定方式，不采用in判定而是用等号。
【仍然卡死】。发生时间似乎集中于某个时间点。是res行动机制，还是AICO统一下达命令变更？
	固定翼udFactoryType的改写也是时间触发的条件，但应该与此无关。v02任务已追加机炮固定翼，但其坦克任务没有这种问题。

RES、TG延时
+ 设置res的三个阶段的判定检测、TG脚本的补给检测，遍历时增加0.1s的延时。

Overlap函数
+ 没必要写这个函数，只要用"_x in A" count B > 0判定就可以了。

CIV的界面探索
+ 简单地应用几个命令是不行的。因此隐藏QUIT按钮。制作后续版本时，再进行仔细的研究。此处笔记无参考价值。
+ **InitSpectator.sqs**里增设逻辑值bFreeMode用于切换模式。
+ **Dialog Spectator.sqs**的Quit部分，更改cameraEffect的同时追加camCommit 0，并设置0.1的延时。
	+ （一度测试发现重新指派camSetTarget到_tracker是有效的，无需camCommit，但之后发现失败。）
	+ （这种设置也会失败。）
	+ Quit按钮暂时隐藏。【测试中】。
		+ _cam camCommand "manual off"关闭相机，关闭成功，但无法操纵player。
		+ player cameraEffect["terminate","back"]可以切换视角到player。
			+ 但是对于SpecCam切换再切回，上述组合指令失效。
			+ 不可以使用manual on开启相机。
			+ 追加_cam CameraEffect无效。大概需要指派target吧。
				+ 上述无效设置，quit后0-0-0返回，然后esc，视角会在天上。这个目标是个线索。
		+ 右上角group信息里，选中底端的east group无效，会选到res的组。是否group ID存在问题？还是面板的问题？
		+ 还是右上角group，选中队长时并不总能成功切换tracking单位。有时有报错，有时点击队长并不切换单位到该队长，需要滚动一下屏幕。
+ **UpdateSpectator.sqs**
	+ 设置一个"_posFreeMove"变量用于记录自由移动模式的坐标，初始化为spectator的起始位置，离开FreeMode时记录，下次进入时移回来。
	+ 主循环里设置一个判定，位于gameOver及alive之后，用于跳出主循环，停止坐标重置。
	+ FreeMode模式下要强制弹出进入载具的CIV。
	+ FreeMode模式设置循环，持续移除武器。退出后重新添加。
	+ 【是否有可能做成自由移动camera模式（含camera背景）】。
	+ 将spectator移动到"_posFreeMove"时，要将camSpec一并移过去。之后点击地图时不再需要调整camSpec，因此理由大概是在dialog、镜头、目标切换时，要等它们处理完毕才行。
+ （其他镜头优化留待后续版本处理。）
	+ 注意FreeCam模式下，有时按G没有指南针，要等一小段时间才有，表现像是卡死的模样。这估计是个突破口。
## 2.12 v03
+ v02仍然卡死（有5人的例子）
+ 服务器减负
	+ Find命令。如果在sqf脚本里使用find，那么并没有实质上将服务器从sqf里解放出来。因此搜索使用find的sqf脚本。
		 + AddRearmData, EditRearmData的sqf脚本被删除，相关机制改写使得无需sqf。
		 + GetRearmData、GetUnitTypeFromObject因为被广泛使用，且被其它sqf调用，因此不删除它们，仅仅将它们与Server的sqf及少量sqs脱钩。GetUnitTypeFromObject只被Server的Order, OrderTemp (SQS)脚本使用。
		 + GetUnitTypeFromObject.sqf里，复制数组但不关联地址，只需使用"+"号。
	+ RES巡逻脚本
		+ **UpdateResPatrolGroup.sqs**脚本全面弃用SQF运算，以SQS的形式进行判定。
		+ PatrolPos的选取也是用SQS格式获取，每次判定延时0.1秒。
	+ **UpdateServer.sqs**里注释CheckDetachedVehicles的运行，无线电频道里已经有召回MHQ的选项。
+ AddWorker判定MHQ是否被拖曳，拖曳的MHQ从tug的位置生成工人。
+ **InitUnitTypes.sqs**中修改榴弹炮在购买列表里的名称（Limited）。修改Ka50的贴图，从插件而非player目录调用（之前没删干净）。
+ 修复Mortar的Equip脚本中残留"xj301"的bug。
+ 炮击功能
	+ 动态生成20个用于炮击的图标。**InitPlayer.sqs**里使用camCreate创造10个不可视H。暂不考虑于服务器的不可视H。
	+ 为玩家队伍命令增设炮击坐标设置/清除命令，以及Mortar/M46建筑、坦克/榴弹炮/Art坦克的炮击命令。对Mortar步兵，由于OFP中fire命令对步兵无效，暂时不设置。
	+ 顺带修改玩家的Order脚本，将其放入Player目录下的Order子目录
+ ShowPad和ShowGPS添加到Spectator的刷新脚本。
## 2.12 v02
+ Equip
	+ 优化EditRearmData系列功能。
	+ 设置4xAA科技在升级时直接对已有单位进行弹夹编辑。
		+ 将相关脚本放到Common\ReEquip目录下
		+ 另外修复UpgState脚本的bug。在UpgState信息脚本里，理应用当前的传入的数值来判断情况，而非直接从矩阵读取数值，原有bug设计会导致Mag科技升级后，新的科技升级使已有的4xAA弹夹翻倍。
	+ 4xAA不适合用游戏原版机炮，它不发射导弹。更改弹药参数之前，取消机炮的设置。4xAA直接继承步兵AA，其cost值为2W，而机炮的cost只是30而已。
+ Temporary系统
	+ 增设All命令
		+ 修改Dialog脚本
		+ 修改Send/Msg脚本，GroupsNum要×2
		+ 设置ALL对Order锁定的队伍不下达临时性命令。
	+ 坦克切换sabot和heat的临时性命令
		+ 设计命令脚本。只由AI队伍的载具gunner启动，并排除remote载具。
		+ 在Common\ReEquip目录下增设实际的重装填弹夹的脚本，供命令脚本调用。
	+ 顺带将临时性命令，以及Order命令的脚本都扔到Server的子目录下
	+ 修复相当一部分临时性命令脚本中indexType不一致的bug（会导致部分命令根本没有用）。
+ 更换榴弹炮为限制角度的Lim版。
+ 设置死亡爆炸效果的5个收讯脚本，用于常规单位。对于res单位，使用logic来实现效果。
+ 为规避笔记本的异常，TZK_Setting里增设ShowPad的逻辑项。
+ 修复v00中dev模式下敌方图标的bug。dev模式强制显示敌图标，而普通模式会隐藏范围外的图标，导致闪烁。因此敌图标的2个脚本在dev模式下要退出。
## 2.12 v01
+ EventHandler
	+ 修复IncomingMissile的bug。这个EH的特殊性在于，如果希望它响应来自remote端的导弹，remote端必须存在一个挂载于相同载具的EH，即使其command参数为空字符串。
	+ 调整Spoof系列的脚本，修复原有bug，并设置drop效果不会在dedicated server上执行。仍然使用publicExec广播。
+ 修复关于"GetUnitMarker.sqf"中对" REMOTE"字符串忽略考虑的bug。
+ 为4xAA添加机炮，测试效果。
+ 引入油桶编辑后的T80模型。
+ 增加死亡坦克燃烧效果。
+ 增加usmc_gala的新任务。
## 2.12 v00
+ 调整版本号。使用"v00-v99"。
+ 解耦图标刷新模式
	+ 己方单位及载具的图标仍然采用sqf，频率2Hz。
	+ 敌方单位采用SQS，频率≤1Hz，首先计算雷达分布，然后显示飞行单位图标；之后进行间谍卫星判定，然后显示图标。
	+ 建筑则每30秒刷新一次，刷新时不对position进行调整，仅判定isNull与否。对己方建筑，额外有一个alive判定与颜色调整。
	+ 调整主循环的显示机制，对于隐藏图标的其个性，减少隐藏的计算判定。
+ 调整UC的模式，为加强对于高速运动的单位的选取，使用UC点击地图时，将Marker名称一并获取，进而判断图标位置是否与点击坐标接近。 